-- // Services
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer

-- // Fly Vars
local velocityHandlerName = "FlyVelocity_"..math.random(1000,9999)
local gyroHandlerName = "FlyGyro_"..math.random(1000,9999)
local flying = false
local flySpeed = 100

-- // Helpers
local function getRoot(char)
	return char and char:FindFirstChild("HumanoidRootPart")
end

-- // Start Fly
local function mobileFly()
	if flying then return end
	local char = LocalPlayer.Character
	local root = getRoot(char)
	if not root then return end

	flying = true
	local camera = workspace.CurrentCamera

	-- BodyVelocity
	local bv = Instance.new("BodyVelocity")
	bv.Name = velocityHandlerName
	bv.MaxForce = Vector3.new(9e9, 9e9, 9e9)
	bv.Velocity = Vector3.zero
	bv.Parent = root

	-- BodyGyro
	local bg = Instance.new("BodyGyro")
	bg.Name = gyroHandlerName
	bg.MaxTorque = Vector3.new(9e9, 9e9, 9e9)
	bg.P = 1000
	bg.D = 50
	bg.Parent = root

	-- Ambil ControlModule roblox (joystick bawaan)
	local controlModule = require(LocalPlayer.PlayerScripts:WaitForChild("PlayerModule"):WaitForChild("ControlModule"))

	-- Loop
	RunService.RenderStepped:Connect(function()
		if not flying or not root or not bv or not bg then return end
		local moveDir = controlModule:GetMoveVector()
		bg.CFrame = camera.CFrame

		local vel = Vector3.zero
		if moveDir.Magnitude > 0 then
			vel = (camera.CFrame.RightVector * moveDir.X + camera.CFrame.LookVector * -moveDir.Z) * flySpeed
		end
		bv.Velocity = vel
	end)
end

-- // Stop Fly
local function stopFly()
	flying = false
	local char = LocalPlayer.Character
	if char then
		local root = getRoot(char)
		if root then
			if root:FindFirstChild(velocityHandlerName) then root[velocityHandlerName]:Destroy() end
			if root:FindFirstChild(gyroHandlerName) then root[gyroHandlerName]:Destroy() end
		end
		local hum = char:FindFirstChildWhichIsA("Humanoid")
		if hum then hum.PlatformStand = false end
	end
end

-- // GUI Bardenss
local ScreenGui = Instance.new("ScreenGui", LocalPlayer.PlayerGui)
local Frame = Instance.new("Frame", ScreenGui)
Frame.Size = UDim2.new(0,200,0,50)
Frame.Position = UDim2.new(0.5,-100,0,100)
Frame.BackgroundColor3 = Color3.fromRGB(255,200,255)
Frame.Active = true
Frame.Draggable = true

local flyBtn = Instance.new("TextButton", Frame)
flyBtn.Size = UDim2.new(0.5,0,1,0)
flyBtn.Position = UDim2.new(0,0,0,0)
flyBtn.Text = "Fly"
flyBtn.BackgroundColor3 = Color3.fromRGB(200,255,200)

local unflyBtn = Instance.new("TextButton", Frame)
unflyBtn.Size = UDim2.new(0.5,0,1,0)
unflyBtn.Position = UDim2.new(0.5,0,0,0)
unflyBtn.Text = "UnFly"
unflyBtn.BackgroundColor3 = Color3.fromRGB(255,200,200)

-- // Connections
flyBtn.MouseButton1Click:Connect(function()
	mobileFly()
end)

unflyBtn.MouseButton1Click:Connect(function()
	stopFly()
end)

-- // Animasi tulisan Bardenss (2 detik)
local animLabel = Instance.new("TextLabel", ScreenGui)
animLabel.Size = UDim2.new(0,300,0,50)
animLabel.Position = UDim2.new(0.5,-150,0.5,-25)
animLabel.BackgroundTransparency = 1
animLabel.Text = "Ｂａｒｄｅｎｓｓ"
animLabel.TextColor3 = Color3.fromRGB(255,150,255)
animLabel.Font = Enum.Font.Fantasy
animLabel.TextScaled = true

game:GetService("TweenService"):Create(animLabel, TweenInfo.new(2), {TextTransparency = 1}):Play()
task.wait(2)
animLabel:Destroy()